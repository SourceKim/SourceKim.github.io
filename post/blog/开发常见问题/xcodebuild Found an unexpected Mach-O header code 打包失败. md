---
title: "xcodebuild Found an unexpected Mach-O header code 打包失败问题"
date: 2020-06-01T23:00:00+08:00
draft: false
tags: [iOS, iOS开发常见问题]
# bigimg: [{src: "https://res.cloudinary.com/jimmysong/image/upload/images/2017052801.jpg", desc: "Beijing China|May 28,2017"}]
---

在使用 `xcodebuild -exportArchive` 将 `xcarchive` 导出 `ipa` 的时候，出现报错：

```shell
+ xcodebuild -exportArchive -archivePath LifeAdvisor.xcarchive -exportPath out -exportOptionsPlist script_debug_exprot_options_debug.plist
2020-06-03 17:10:41.622 xcodebuild[30440:2129280] [MT] IDEDistribution: -[IDEDistributionLogging _createLoggingBundleAtPath:]: Created bundle at path '/var/folders/yz/gs4kr5kd2rs98b3gsg1tt7wc00008g/T/LifeAdvisor_2020-06-03_17-10-41.621.xcdistributionlogs'.
2020-06-03 17:10:42.345 xcodebuild[30440:2129280] [MT] IDEDistribution: Failed to generate distribution items with error: Error Domain=DVTMachOErrorDomain Code=0 "Found an unexpected Mach-O header code: 0x72613c21" UserInfo={NSLocalizedDescription=Found an unexpected Mach-O header code: 0x72613c21, NSLocalizedRecoverySuggestion=}
error: exportArchive: Found an unexpected Mach-O header code: 0x72613c21

Error Domain=DVTMachOErrorDomain Code=0 "Found an unexpected Mach-O header code: 0x72613c21" UserInfo={NSLocalizedDescription=Found an unexpected Mach-O header code: 0x72613c21, NSLocalizedRecoverySuggestion=}

** EXPORT FAILED **
```

关键错误日志：

```shell
Found an unexpected Mach-O header code: 0x72613c21
```

原因：

将 **静态 framework** 配置到了工程的 `Frameworks, Libraries and Embedded Content` 中了。

![Frameworks, Libraries and Embedded Content](https://gitee.com/SourceKim/PictureBed/raw/master/img/WeChatded23b390c37bdad661a90f592ca6266.png)

将它删除即可。

另外，如何区分静态 framework & 动态 framework?

一个简单的方法就是，进入到 Framework，查看其二进制文件的图标：

- 白色是静态

![](https://gitee.com/SourceKim/PictureBed/raw/master/img/20200603192607.png)

- 绿色是动态

![](https://gitee.com/SourceKim/PictureBed/raw/master/img/20200603192654.png)